

l :-
measures(16),
meter(2,4), voice(melody),

mchord(1,c),
mchord(2,g),
mchord(3,am),
mchord(4,f),
mchord(5,c),
mchord(6,g),
mchord(7,f),
mchord(8,c),
mchord(9,c),
mchord(10,g),
mchord(11,am),
mchord(12,f),
mchord(13,c),
mchord(14,g),
mchord(15,c),
mchord(16,c),


line(melody,[
(1,0,0)-(c,4,5),
(1,1,0)-(c,4,5),
(2,0,0)-(g,4,4),
(2,1,0)-(g,4,4),
(3,0,0)-(a,4,4),
(3,1,0)-(a,4,4),
(4,0,0)-(f,4,4),
(4,1,0)-(f,4,4),
(5,0,0)-(g,4,4),
(5,1,0)-(g,4,4),
(6,0,0)-(g,4,4),
(6,1,0)-(g,4,4),
(7,0,0)-(a,4,4),
(7,1,0)-(g,8,4),
(7,1,0.5)-(f,8,4),
(8,0,0)-(g,4,4),
(8,1,0)-(g,8,4),
(8,1,0.5)-(g,16,4),
(8,1,0.75)-(g,16,4),
(9,0,0)-(g,8,4),
(9,0,0.5 )-(g,16,4),
(9,0,0.75)-(a,16,4),
(9,1,0)-   (a,8,4),
(9,1,0.5)- (e,8,4),
(10,0,0)-   (g,8,4),
(10,0,0.5)- (g,8,4),
(10,1,0)-   (c,16,5),
(10,1,0.25)-(d,16,5),
(10,1,0.5)- (d,8,5),
(11,0,0  )- (e,16,5),
(11,0,0.25)- (e,16,5),
(11,0,0.5 )- (e,16,5),
(11,0,0.75)- (e,16,5),
(11,1,0  )- (e,8,5),
(11,1,0.5)- (d,8,5),
(12,0,0   )- (d,8,5),
(12,0,0.5 )- (c,8,5),
(12,1,0   )- (c,4,5),
(13,0,0   )- (e,16,5),
(13,0,0.25)- (e,16,5),
(13,0,0.5 )- (e,8,5),
(13,1,0   )- (f,8 ,5),
(13,1,0.5 )- (e,16,5),
(13,1,0.75)- (e,16,5),
(14,0,0   )- (e,8,5),
(14,0,0.5 )- (d,8,5),
(14,1,0   )- (d,8,5),
(14,1,0.5 )- (e,16,5),
(14,1,0.75)- (d,16,5),
(15,0,0   )- (d,8,5),
(15,0,0.5 )- (c,8,5),
(15,1,0   )- (c,4,5),
(16,0,0   )- (c,4,5),
(16,1,0   )- (r,4,5)


]),
tied(melody,8,0,0),
tied(melody,9,0,0.75),
tied(melody,10,1,0.25),
tied(melody,11,0,0.25),
tied(melody,11,0,0.75),
tied(melody,13,0,0.25),
tied(melody,13,1,0.75),
tied(melody,14,0,0.5),
tied(melody,15,0,0.5),
tied(melody,15,1,0),

phase(output).



line(_V,[]).

line(V,[(M,P,X)-(Note,Length,Octave)]) :-
        beat(V,M,P,X,Length),
        note(V,M,P,X,Note),
        octave(V,M,P,X,Octave).

line(V,[(M,P,X)-This, (M2,P2,X2)-Next | Rest]) :-
        line(V,[(M,P,X)-This]),
        next_beat(V,M,P,X,M2,P2,X2),
        line(V,[(M2,P2,X2)-Next | Rest]).
